import threading

import kivy
from kivy.app import App
from kivy.uix.button import Button
from server import Server
# Replace this with your
# current version
kivy.require('1.11.1')


# Defining a class
class ButtonApp(App):

    # Function that returns
    # the root widget
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.server = Server()
        t = threading.Thread(target=self.server.main)
        t.start()

    def build(self):
        # Label with text Hello World is
        # returned as root widget
        btn = Button(text="Push Me !",
                     font_size="20sp",
                     background_color=(1, 1, 1, 1),
                     color=(1, 1, 1, 1),
                     size=(32, 32),
                     size_hint=(.2, .2),
                     pos=(300, 250))

        # bind() use to bind the button to function callback
        btn.bind(on_press=self.callback)
        # return btn

    def callback(self, event):
        print(self.server.get_received_info())

    # Here our class is initialized


# and its run() method is called.
# This initializes and starts
# our Kivy application.

if __name__ == '__main__':
    ButtonApp().run()
